<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DOM | tombstone</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/tombstone/favicon.ico">
    <meta name="description" content="tombstone docs">
    
    <link rel="preload" href="/tombstone/assets/css/0.styles.f148acde.css" as="style"><link rel="preload" href="/tombstone/assets/js/app.9fd75573.js" as="script"><link rel="preload" href="/tombstone/assets/js/2.22b1341b.js" as="script"><link rel="preload" href="/tombstone/assets/js/6.babfa02b.js" as="script"><link rel="prefetch" href="/tombstone/assets/js/10.92cf42c1.js"><link rel="prefetch" href="/tombstone/assets/js/11.dacd75a0.js"><link rel="prefetch" href="/tombstone/assets/js/12.6ab88846.js"><link rel="prefetch" href="/tombstone/assets/js/13.29a23e88.js"><link rel="prefetch" href="/tombstone/assets/js/14.05157bcd.js"><link rel="prefetch" href="/tombstone/assets/js/15.ba0cbd5b.js"><link rel="prefetch" href="/tombstone/assets/js/16.eac23020.js"><link rel="prefetch" href="/tombstone/assets/js/17.dbf60438.js"><link rel="prefetch" href="/tombstone/assets/js/18.47a4e02a.js"><link rel="prefetch" href="/tombstone/assets/js/19.b2cbc864.js"><link rel="prefetch" href="/tombstone/assets/js/20.fd42a909.js"><link rel="prefetch" href="/tombstone/assets/js/21.5c8f216e.js"><link rel="prefetch" href="/tombstone/assets/js/22.5116d3cd.js"><link rel="prefetch" href="/tombstone/assets/js/23.ee060618.js"><link rel="prefetch" href="/tombstone/assets/js/24.de6bf1af.js"><link rel="prefetch" href="/tombstone/assets/js/25.e94498c5.js"><link rel="prefetch" href="/tombstone/assets/js/26.6786bfa1.js"><link rel="prefetch" href="/tombstone/assets/js/27.b7c27427.js"><link rel="prefetch" href="/tombstone/assets/js/28.12c1eba6.js"><link rel="prefetch" href="/tombstone/assets/js/29.55ad7f1e.js"><link rel="prefetch" href="/tombstone/assets/js/3.6333b005.js"><link rel="prefetch" href="/tombstone/assets/js/30.da06c9e1.js"><link rel="prefetch" href="/tombstone/assets/js/31.0ea9d234.js"><link rel="prefetch" href="/tombstone/assets/js/32.2d81533d.js"><link rel="prefetch" href="/tombstone/assets/js/33.36caeec2.js"><link rel="prefetch" href="/tombstone/assets/js/34.a3cf5dac.js"><link rel="prefetch" href="/tombstone/assets/js/35.c9cf3cbf.js"><link rel="prefetch" href="/tombstone/assets/js/36.88fa11a1.js"><link rel="prefetch" href="/tombstone/assets/js/37.2bb97349.js"><link rel="prefetch" href="/tombstone/assets/js/38.ece07cda.js"><link rel="prefetch" href="/tombstone/assets/js/39.eaa7f769.js"><link rel="prefetch" href="/tombstone/assets/js/4.68736979.js"><link rel="prefetch" href="/tombstone/assets/js/40.77646828.js"><link rel="prefetch" href="/tombstone/assets/js/41.8ad7a703.js"><link rel="prefetch" href="/tombstone/assets/js/42.c08c4ec8.js"><link rel="prefetch" href="/tombstone/assets/js/43.314613f7.js"><link rel="prefetch" href="/tombstone/assets/js/44.8cb8ddfb.js"><link rel="prefetch" href="/tombstone/assets/js/45.e5a859a9.js"><link rel="prefetch" href="/tombstone/assets/js/46.feade6cb.js"><link rel="prefetch" href="/tombstone/assets/js/47.830a381d.js"><link rel="prefetch" href="/tombstone/assets/js/48.67c3f8e6.js"><link rel="prefetch" href="/tombstone/assets/js/49.a3be7d88.js"><link rel="prefetch" href="/tombstone/assets/js/5.408f0624.js"><link rel="prefetch" href="/tombstone/assets/js/7.296e2aa0.js"><link rel="prefetch" href="/tombstone/assets/js/8.27fccdfe.js"><link rel="prefetch" href="/tombstone/assets/js/9.a1893316.js">
    <link rel="stylesheet" href="/tombstone/assets/css/0.styles.f148acde.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/tombstone/" class="home-link router-link-active"><!----> <span class="site-name">tombstone</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/tombstone/about.html" class="nav-link">
  about
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/tombstone/about.html" class="nav-link">
  about
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/tombstone/" aria-current="page" class="sidebar-link">Home</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/tombstone/handbook/" class="sidebar-heading clickable"><span>手册</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/tombstone/frontend/" class="sidebar-heading clickable router-link-active open"><span>前端</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/tombstone/frontend/browser/howbrowserworks.html" class="sidebar-link">浏览器是怎么工作的</a></li><li><a href="/tombstone/frontend/performance/" class="sidebar-link">前端性能优化</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/tombstone/frontend/javascript/" class="sidebar-heading clickable router-link-active open"><span>JavaScript</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/tombstone/frontend/javascript/howjsworks.html" class="sidebar-link">JS 是怎么工作的</a></li><li><a href="/tombstone/frontend/javascript/crossorigin.html" class="sidebar-link">浏览器同源策略与 ajax 跨域方法</a></li><li><a href="/tombstone/frontend/javascript/jsapi.html" class="sidebar-link">JS API</a></li><li><a href="/tombstone/frontend/javascript/dom.html" aria-current="page" class="active sidebar-link">DOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tombstone/frontend/javascript/dom.html#常用-dom-api" class="sidebar-link">常用 dom api</a></li><li class="sidebar-sub-header"><a href="/tombstone/frontend/javascript/dom.html#参考文档" class="sidebar-link">参考文档</a></li></ul></li><li><a href="/tombstone/frontend/javascript/jsutil.html" class="sidebar-link">常用 JS 工具方法</a></li><li><a href="/tombstone/frontend/javascript/jsalgorithms.html" class="sidebar-link">JS 中常见算法</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/tombstone/frontend/css/" class="sidebar-heading clickable"><span>CSS</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/tombstone/frontend/css/selector.html" class="sidebar-link">选择器、优先级、继承和级联</a></li><li><a href="/tombstone/frontend/css/properties.html" class="sidebar-link">常用 CSS 属性</a></li><li><a href="/tombstone/frontend/css/box.html" class="sidebar-link">盒模型与外边距重叠</a></li><li><a href="/tombstone/frontend/css/csslayout.html" class="sidebar-link">CSS 布局</a></li><li><a href="/tombstone/frontend/css/containingblock.html" class="sidebar-link">包含块</a></li><li><a href="/tombstone/frontend/css/stackingcontext.html" class="sidebar-link">层叠上下文</a></li><li><a href="/tombstone/frontend/css/bfc.html" class="sidebar-link">Block Formatting Context</a></li><li><a href="/tombstone/frontend/css/cssom.html" class="sidebar-link">CSSOM</a></li></ul></section></li><li><a href="/tombstone/frontend/security/" class="sidebar-link">前端安全问题</a></li><li><a href="/tombstone/frontend/typescript/" class="sidebar-link">TypeScript</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/tombstone/frontend/library/" class="sidebar-heading clickable"><span>前端框架</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/tombstone/frontend/library/react.html" class="sidebar-link">React</a></li><li><a href="/tombstone/frontend/library/redux.html" class="sidebar-link">Redux</a></li><li><a href="/tombstone/frontend/library/reactimvc.html" class="sidebar-link">React-IMVC</a></li><li><a href="/tombstone/frontend/library/immer.html" class="sidebar-link">Immer</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/tombstone/frontend/tools/" class="sidebar-heading clickable"><span>工程化与工具</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/tombstone/frontend/tools/babel.html" class="sidebar-link">Babel</a></li><li><a href="/tombstone/frontend/tools/webpack.html" class="sidebar-link">Webpack</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/tombstone/server/" class="sidebar-heading clickable"><span>服务端</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/tombstone/network/" class="sidebar-heading clickable"><span>网络</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/tombstone/blog/" class="sidebar-link">文章</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dom"><a href="#dom" class="header-anchor">#</a> DOM</h1> <p>Document Object Model（文档对象模型）是用来呈现以及与任意 HTML 或 XML文档交互的API。</p> <p>在DOM编程时，通常使用的最多的就是 Document 和 window 对象。简单的说， window 对象表示浏览器中的内容，而 document 对象是文档本身的根节点。Element 继承了通用的 Node 接口, 将这两个接口结合后就提供了许多方法和属性可以供单个元素使用。在处理这些元素所对应的不同类型的数据时，这些元素可能会有专用的接口，如 table 对象实现了 HTML Table Element Interface。</p> <p>下面列出一些最常用的 api。</p> <h2 id="常用-dom-api"><a href="#常用-dom-api" class="header-anchor">#</a> 常用 dom api</h2> <p>Node 继承了 EventTarget； Document、Element、Attr、CharacterData (which Text, Comment, and CDATASection inherit) 等继承了 Node。</p> <p><img src="/tombstone/assets/img/dom-class-hierarchy.0359ef30.svg" alt="hierarchy"></p> <h3 id="eventtarget"><a href="#eventtarget" class="header-anchor">#</a> EventTarget</h3> <p>EventTarget 是一个由可以接收事件的对象实现的接口，并且可以为它们创建侦听器。</p> <h4 id="方法"><a href="#方法" class="header-anchor">#</a> 方法</h4> <ul><li>addEventListener(type, listener, useCapture/options)</li> <li>removeEventListener(type, listener, useCapture/options)</li> <li>dispatchEvent(event)</li></ul> <h3 id="node"><a href="#node" class="header-anchor">#</a> Node</h3> <h4 id="属性"><a href="#属性" class="header-anchor">#</a> 属性</h4> <ul><li>nodeName
<ul><li>只读， HTMLElement的名字跟它所关联的标签对应, Text节点对应的是 '#text', 还有Document节点对应的是 '#document'</li></ul></li> <li>nodeType
<ul><li>只读， 1 元素， 2 属性， 3 文本， 8 注释， 9 文档， 11 fragment</li></ul></li> <li>nodeValue
<ul><li>返回或设置当前节点的值， 元素节点为 null, 文本节点就是文本值</li></ul></li> <li>parentNode   <em>只读， 返回父节点或null</em></li> <li>parentElement   <em>只读，返回一个当前节点的父节点 Element 。 如果当前节点没有父节点或者说父节点不是一个元素(Element), 这个属性返回null</em></li> <li>previousSibling   <em>只读，返回一个当前节点同级的前一个结点或null</em></li> <li>nextSibling   <em>只读，返回与该节点同级的下一个节点 Node，如果没有返回null</em></li> <li>childNodes   <em>只读，返回一个包含了该节点所有子节点的实时的NodeList</em></li> <li>firstChild   <em>只读，返回该节点的第一个子节点Node或null</em></li> <li>lastChild    <em>只读，返回该节点的最后一个子节点Node或null</em></li> <li>textContent    <em>返回或设置一个元素内所有子结点及其后代的文本内容</em></li></ul> <h4 id="方法-2"><a href="#方法-2" class="header-anchor">#</a> 方法</h4> <ul><li>appendChild(childNode)
<ul><li>将指定的 childNode 参数作为最后一个子节点添加到当前节点。</li> <li>如果参数引用了 DOM 树上的现有节点，则节点将从当前位置分离，并附加到新位置。</li></ul></li> <li>cloneNode(deep)
<ul><li>克隆一个 Node，并且可以选择是否克隆这个节点下的所有内容</li></ul></li> <li>contains(node)
<ul><li>包含，包括是本身时，返回 true</li></ul></li> <li>getRootNode()  <em>正常文档中为 document</em></li> <li>hasChildNodes()
<ul><li>等价于 node.firstChild !== null 或 node.childNodes.length &gt; 0</li></ul></li> <li>parentNode.insertBefore(newNode, referenceNode)</li> <li>parentNode.removeChild(childNode)</li> <li>parentNode.replaceChild(newChild, oldChild)</li></ul> <p><img src="/tombstone/assets/img/dom-links.af2075d9.svg" alt="node"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 移除所有子节点</span>
<span class="token keyword">function</span> <span class="token function">removeAllChildren</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    node<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// or</span>
  node<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 遍历节点树</span>
<span class="token keyword">function</span> <span class="token function">eachNodeTree</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">childNode</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">eachNodeTree</span><span class="token punctuation">(</span>childNode<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="nodelist"><a href="#nodelist" class="header-anchor">#</a> NodeList</h4> <p>NodeList 对象是一个节点的集合，是由 Node.childNodes 和 document.querySelectorAll 返回的.</p> <p>在一些情况下，NodeList 对象是一个实时集合，也就是说，如果文档中的节点树发生变化，则已经存在的实时 NodeList 对象也会随之变化。例如，Node.childNodes 是实时的</p> <ul><li>属性和方法
<ul><li>length</li> <li>item(index)</li></ul></li> <li>遍历
<ul><li>for 循环</li> <li>Array.prototype.forEach.call(nodeList, node =&gt; {...})</li></ul></li></ul> <h3 id="element"><a href="#element" class="header-anchor">#</a> Element</h3> <h4 id="属性-2"><a href="#属性-2" class="header-anchor">#</a> 属性</h4> <ul><li>tagName  <em>只读</em></li> <li>attributes  <em>只读</em></li> <li>dataset <em>以 data- 开头的特性</em></li> <li>id</li> <li>className</li> <li>classList  <em>只读</em> <ul><li>value</li> <li>item(index)</li> <li>add(str1, ...)</li> <li>remove(str1, ..)</li> <li>toggle(str)</li> <li>contains(str)</li> <li>replace(oldClass, newClass)</li></ul></li> <li>clientWidth / clientHeight  <em>只读，截止内边距，四舍五入到整数，内联及没有 CSS 样式的元素为 0</em></li> <li>scrollWidth / scrollHeight  <em>只读</em></li> <li>scrollLeft / scrollTop</li> <li>innerHTML</li> <li>outHTML</li></ul> <h4 id="方法-3"><a href="#方法-3" class="header-anchor">#</a> 方法</h4> <ul><li>getElementsByClassName(name)  <em>返回一个即时更新的（live） HTMLCollection</em></li> <li>getElementsByTagName(tagName)  <em>返回一个动态的包含所有指定标签名的元素的HTML集合HTMLCollection</em></li> <li>querySelector(selector)</li> <li>querySelectorAll(selector)  <strong>返回一个non-live的NodeList</strong></li> <li>matches(selector)  <em>返回 true/false</em></li> <li>closest(selector) <em>查找与 CSS 选择器匹配的最近的祖先</em></li> <li>getAttribute(attrName)</li> <li>hasAttribute(attrName)</li> <li>setAttribute(attrName, value)</li> <li>removeAttribute(attrName)</li> <li>toggleAttribute(attrName, force)</li> <li>getAttributeNames()</li> <li>getBoundingClientRect()
<ul><li>{top, bottom, left, right, width, height, x, y}</li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMClientRect" target="_blank" rel="noopener noreferrer">解释<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>scrollIntoView()
<ul><li>有兼容性， <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollIntoView" target="_blank" rel="noopener noreferrer">解释<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <p><img src="/tombstone/assets/img/dom-links-elements.0c4f945d.svg" alt="element"></p> <h3 id="document"><a href="#document" class="header-anchor">#</a> Document</h3> <ul><li>getElementById(id)</li> <li>getElementsByClassName(name)</li> <li>getElementsByTagName(tagName)</li> <li>querySelector(selector)</li> <li>querySelectorAll(selector)</li> <li>createTextNode(data)</li> <li>createElement(tagName[, options])</li> <li>createDocumentFragment()</li> <li>createComment(data)</li> <li>...</li></ul> <h2 id="参考文档"><a href="#参考文档" class="header-anchor">#</a> 参考文档</h2> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document_Object_Model/Introduction" target="_blank" rel="noopener noreferrer">DOM概述<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/tombstone/frontend/javascript/jsapi.html" class="prev">
        JS API
      </a></span> <span class="next"><a href="/tombstone/frontend/javascript/jsutil.html">
        常用 JS 工具方法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/tombstone/assets/js/app.9fd75573.js" defer></script><script src="/tombstone/assets/js/2.22b1341b.js" defer></script><script src="/tombstone/assets/js/6.babfa02b.js" defer></script>
  </body>
</html>
