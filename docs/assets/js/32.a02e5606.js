(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{401:function(t,a,s){"use strict";s.r(a);var e=s(40),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"react"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react"}},[t._v("#")]),t._v(" React")]),t._v(" "),s("ul",[s("li",[t._v("API\n"),s("ul",[s("li",[t._v("React")]),t._v(" "),s("li",[t._v("Component")]),t._v(" "),s("li",[t._v("ReactDOM / ReactDOMServer")])])]),t._v(" "),s("li",[t._v("LifeCycle")]),t._v(" "),s("li",[t._v("Context")]),t._v(" "),s("li",[t._v("Refs && Forwarding Refs")]),t._v(" "),s("li",[t._v("Higher-Order Components")]),t._v(" "),s("li",[t._v("Render Props")]),t._v(" "),s("li",[t._v("Error Boundaries")]),t._v(" "),s("li",[t._v("Portals")]),t._v(" "),s("li",[t._v("Reconciliation")]),t._v(" "),s("li",[t._v("SyntheticEvent")]),t._v(" "),s("li",[t._v("Hooks")]),t._v(" "),s("li",[t._v("...")])]),t._v(" "),s("h2",{attrs:{id:"组件生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#组件生命周期"}},[t._v("#")]),t._v(" 组件生命周期")]),t._v(" "),s("ul",[s("li",[t._v("mount\n"),s("ul",[s("li",[s("code",[t._v("constructor(props)")]),t._v(" => "),s("code",[t._v("static getDerivedStateFromProps()")]),t._v(" => "),s("code",[t._v("UNSAFE_componentWillMount()")]),t._v(" => "),s("code",[t._v("render()")]),t._v(" => "),s("code",[t._v("ComponentDidMount()")])])])]),t._v(" "),s("li",[t._v("update\n"),s("ul",[s("li",[s("code",[t._v("static getDerivedStateFromProps()")]),t._v(" => "),s("code",[t._v("UNSAFE_componentWillReceiveProps()")]),t._v(" => "),s("code",[t._v("shouldComponentUpdate()")]),t._v(" => "),s("code",[t._v("UNSAFE_componentWillUpdate()")]),t._v(" => "),s("code",[t._v("render()")]),t._v(" => "),s("code",[t._v("getSnapshotBeforeUpdate()")]),t._v(" => "),s("code",[t._v("componentDidUpdate()")])])])]),t._v(" "),s("li",[t._v("unmount\n"),s("ul",[s("li",[s("code",[t._v("componentWillUnmount()")])])])]),t._v(" "),s("li",[t._v("error handling\n"),s("ul",[s("li",[s("code",[t._v("static getDerivedStateFromError()")])]),t._v(" "),s("li",[s("code",[t._v("componentDidCatch()")])])])])]),t._v(" "),s("p",[s("a",{attrs:{href:"http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/",target:"_blank",rel:"noopener noreferrer"}},[t._v("生命周期图"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"hooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks"}},[t._v("#")]),t._v(" Hooks")]),t._v(" "),s("h3",{attrs:{id:"动机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#动机"}},[t._v("#")]),t._v(" 动机")]),t._v(" "),s("ul",[s("li",[t._v("难以在组件间复用状态逻辑\n"),s("ul",[s("li",[t._v("类组件间复用状态逻辑的方式是 render props 和 high-order components")]),t._v(" "),s("li",[t._v("上面两种方式需要重新组织组件结构，改动大量代码；且容易形成 “wrapper hell”")]),t._v(" "),s("li",[t._v("hooks 能够轻松抽取状态逻辑，独立测试，方便复用")])])]),t._v(" "),s("li",[t._v("复杂组件变得难以理解\n"),s("ul",[s("li",[t._v("类组件是根据生命周期来组织代码的，同一逻辑的代码被拆分到不同的生命周期里，而不同逻辑的代码被组合到同一生命周期")]),t._v(" "),s("li",[t._v("复杂逻辑的类组件很难拆分成更小的组件")]),t._v(" "),s("li",[t._v("hooks 的 useEffect 专门用来把同一逻辑的副作用组合到一起")])])]),t._v(" "),s("li",[t._v("相对于 function, class 更容易使人和机器困惑\n"),s("ul",[s("li",[t._v("如 this 绑定")]),t._v(" "),s("li",[t._v("类组件更难优化（类似 Angular 的 ahead-of-time compilation）")])])])]),t._v(" "),s("h3",{attrs:{id:"规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#规则"}},[t._v("#")]),t._v(" 规则")]),t._v(" "),s("ul",[s("li",[t._v("Only Call Hooks at the Top Level\n"),s("ul",[s("li",[t._v("不能在循环、条件判断、嵌套的函数内使用 hooks")])])]),t._v(" "),s("li",[t._v("Only Call Hooks from React Functions\n"),s("ul",[s("li",[t._v("函数组件内")]),t._v(" "),s("li",[t._v("自定义 hooks 内")])])])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.npmjs.com/package/eslint-plugin-react-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("eslint-plugin-react-hooks"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"hooks-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks-api"}},[t._v("#")]),t._v(" Hooks API")]),t._v(" "),s("h4",{attrs:{id:"usestate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usestate"}},[t._v("#")]),t._v(" useState")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// useState 参数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" initialState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setState 参数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevState")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" newState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"useeffect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useeffect"}},[t._v("#")]),t._v(" useEffect")]),t._v(" "),s("ul",[s("li",[t._v("Unlike "),s("code",[t._v("componentDidMount")]),t._v(" and "),s("code",[t._v("componentDidUpdate")]),t._v(", the function passed to useEffect fires after layout and paint, during a deferred event.")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// effect code")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// clean code")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// deps: 不传，每次渲染后都执行 useEffect")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// deps: [], 只在初始渲染后执行一次")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// deps: [dep1, ...], 初始渲染后执行，任何依赖变化后执行")]),t._v("\n")])])]),s("h4",{attrs:{id:"uselayouteffect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uselayouteffect"}},[t._v("#")]),t._v(" useLayoutEffect")]),t._v(" "),s("ul",[s("li",[t._v("The signature is identical to useEffect, but it fires synchronously after all DOM mutations. Use this to read layout from the DOM and synchronously re-render.")])]),t._v(" "),s("h4",{attrs:{id:"usecontext"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usecontext"}},[t._v("#")]),t._v(" useContext")]),t._v(" "),s("ul",[s("li",[t._v("The current context value is determined by the value prop of the nearest "),s("code",[t._v("<MyContext.Provider>")]),t._v(" above the calling component in the tree.")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useContext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"usereducer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usereducer"}},[t._v("#")]),t._v(" useReducer")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dispatch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useReducer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reducer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" initialArg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" init"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reducer: (state, action) => newState")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// initialArg: 没有第三个参数 init 时， 这就是 initialState")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// init: (initialArg) => initialState, 可选")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// dispatch: ({type, payload}) => void")]),t._v("\n")])])]),s("h4",{attrs:{id:"usecallback"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usecallback"}},[t._v("#")]),t._v(" useCallback")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Returns a memoized callback.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" memoizedCallback "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomething")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"usememo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usememo"}},[t._v("#")]),t._v(" useMemo")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" memoizedValue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMemo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("computeExpensiveValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"useref"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useref"}},[t._v("#")]),t._v(" useRef")]),t._v(" "),s("ul",[s("li",[t._v("useRef returns a mutable ref object whose "),s("code",[t._v(".current")]),t._v(" property is initialized to the passed argument (initialValue). The returned object will "),s("strong",[t._v("persist for the full lifetime of the component")]),t._v(".")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ref "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ref.current")]),t._v("\n")])])]),s("h4",{attrs:{id:"useimperativehandle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useimperativehandle"}},[t._v("#")]),t._v(" useImperativeHandle")]),t._v(" "),s("p",[t._v("和 "),s("code",[t._v("forwardRef")]),t._v(" 一起使用, 见 "),s("a",{attrs:{href:"https://reactjs.org/docs/hooks-reference.html#useimperativehandle",target:"_blank",rel:"noopener noreferrer"}},[t._v("useImperativeHandle"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"usedebugvalue"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usedebugvalue"}},[t._v("#")]),t._v(" useDebugValue")]),t._v(" "),s("p",[t._v("be used to display a label for custom hooks in React DevTools. see "),s("a",{attrs:{href:"https://reactjs.org/docs/hooks-reference.html#usedebugvalue",target:"_blank",rel:"noopener noreferrer"}},[t._v("useDebugValue"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"参考文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[t._v("#")]),t._v(" 参考文档")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://react.iamkasong.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("React技术揭秘"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://wattenberger.com/blog/react-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("Thinking in React Hooks"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/gragland/usehooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/gragland/usehooks"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);