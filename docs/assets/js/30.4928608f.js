(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{183:function(t,a,e){"use strict";e.r(a);var s=e(0),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"react"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react","aria-hidden":"true"}},[t._v("#")]),t._v(" React")]),t._v(" "),e("ul",[e("li",[t._v("API\n"),e("ul",[e("li",[t._v("React")]),t._v(" "),e("li",[t._v("Component")]),t._v(" "),e("li",[t._v("ReactDOM / ReactDOMServer")])])]),t._v(" "),e("li",[t._v("LifeCycle")]),t._v(" "),e("li",[t._v("Context")]),t._v(" "),e("li",[t._v("Refs && Forwarding Refs")]),t._v(" "),e("li",[t._v("Higher-Order Components")]),t._v(" "),e("li",[t._v("Render Props")]),t._v(" "),e("li",[t._v("Error Boundaries")]),t._v(" "),e("li",[t._v("Portals")]),t._v(" "),e("li",[t._v("Reconciliation")]),t._v(" "),e("li",[t._v("SyntheticEvent")]),t._v(" "),e("li",[t._v("Hooks")]),t._v(" "),e("li",[t._v("...")])]),t._v(" "),e("h2",{attrs:{id:"组件生命周期"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#组件生命周期","aria-hidden":"true"}},[t._v("#")]),t._v(" 组件生命周期")]),t._v(" "),e("ul",[e("li",[t._v("mount\n"),e("ul",[e("li",[e("code",[t._v("constructor(props)")]),t._v(" => "),e("code",[t._v("static getDerivedStateFromProps()")]),t._v(" => "),e("code",[t._v("UNSAFE_componentWillMount()")]),t._v(" => "),e("code",[t._v("render()")]),t._v(" => "),e("code",[t._v("ComponentDidMount()")])])])]),t._v(" "),e("li",[t._v("update\n"),e("ul",[e("li",[e("code",[t._v("static getDerivedStateFromProps()")]),t._v(" => "),e("code",[t._v("UNSAFE_componentWillReceiveProps()")]),t._v(" => "),e("code",[t._v("shouldComponentUpdate()")]),t._v(" => "),e("code",[t._v("UNSAFE_componentWillUpdate()")]),t._v(" => "),e("code",[t._v("render()")]),t._v(" => "),e("code",[t._v("getSnapshotBeforeUpdate()")]),t._v(" => "),e("code",[t._v("componentDidUpdate()")])])])]),t._v(" "),e("li",[t._v("unmount\n"),e("ul",[e("li",[e("code",[t._v("componentWillUnmount()")])])])]),t._v(" "),e("li",[t._v("error handling\n"),e("ul",[e("li",[e("code",[t._v("static getDerivedStateFromError()")])]),t._v(" "),e("li",[e("code",[t._v("componentDidCatch()")])])])])]),t._v(" "),e("p",[e("a",{attrs:{href:"http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/",target:"_blank",rel:"noopener noreferrer"}},[t._v("生命周期图"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"hooks"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hooks","aria-hidden":"true"}},[t._v("#")]),t._v(" Hooks")]),t._v(" "),e("h3",{attrs:{id:"动机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#动机","aria-hidden":"true"}},[t._v("#")]),t._v(" 动机")]),t._v(" "),e("ul",[e("li",[t._v("难以在组件间复用状态逻辑\n"),e("ul",[e("li",[t._v("类组件间复用状态逻辑的方式是 render props 和 high-order components")]),t._v(" "),e("li",[t._v("上面两种方式需要重新组织组件结构，改动大量代码；且容易形成 “wrapper hell”")]),t._v(" "),e("li",[t._v("hooks 能够轻松抽取状态逻辑，独立测试，方便复用")])])]),t._v(" "),e("li",[t._v("复杂组件变得难以理解\n"),e("ul",[e("li",[t._v("类组件是根据生命周期来组织代码的，同一逻辑的代码被拆分到不同的生命周期里，而不同逻辑的代码被组合到同一生命周期")]),t._v(" "),e("li",[t._v("复杂逻辑的类组件很难拆分成更小的组件")]),t._v(" "),e("li",[t._v("hooks 的 useEffect 专门用来把同一逻辑的副作用组合到一起")])])]),t._v(" "),e("li",[t._v("相对于 function, class 更容易使人和机器困惑\n"),e("ul",[e("li",[t._v("如 this 绑定")]),t._v(" "),e("li",[t._v("类组件更难优化（类似 Angular 的 ahead-of-time compilation）")])])])]),t._v(" "),e("h3",{attrs:{id:"规则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#规则","aria-hidden":"true"}},[t._v("#")]),t._v(" 规则")]),t._v(" "),e("ul",[e("li",[t._v("Only Call Hooks at the Top Level\n"),e("ul",[e("li",[t._v("不能在循环、条件判断、嵌套的函数内使用 hooks")])])]),t._v(" "),e("li",[t._v("Only Call Hooks from React Functions\n"),e("ul",[e("li",[t._v("函数组件内")]),t._v(" "),e("li",[t._v("自定义 hooks 内")])])])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.npmjs.com/package/eslint-plugin-react-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("eslint-plugin-react-hooks"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"hooks-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hooks-api","aria-hidden":"true"}},[t._v("#")]),t._v(" Hooks API")]),t._v(" "),e("h4",{attrs:{id:"usestate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usestate","aria-hidden":"true"}},[t._v("#")]),t._v(" useState")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("state"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setState"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialState"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// useState 参数")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialState"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" initialState"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setState 参数")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newState"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevState")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" newState"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h4",{attrs:{id:"useeffect"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#useeffect","aria-hidden":"true"}},[t._v("#")]),t._v(" useEffect")]),t._v(" "),e("ul",[e("li",[t._v("Unlike "),e("code",[t._v("componentDidMount")]),t._v(" and "),e("code",[t._v("componentDidUpdate")]),t._v(", the function passed to useEffect fires after layout and paint, during a deferred event.")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// effect code")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// clean code")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// deps: 不传，每次渲染后都执行 useEffect")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// deps: [], 只在初始渲染后执行一次")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// deps: [dep1, ...], 初始渲染后执行，任何依赖变化后执行")]),t._v("\n")])])]),e("h4",{attrs:{id:"uselayouteffect"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uselayouteffect","aria-hidden":"true"}},[t._v("#")]),t._v(" useLayoutEffect")]),t._v(" "),e("ul",[e("li",[t._v("The signature is identical to useEffect, but it fires synchronously after all DOM mutations. Use this to read layout from the DOM and synchronously re-render.")])]),t._v(" "),e("h4",{attrs:{id:"usecontext"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usecontext","aria-hidden":"true"}},[t._v("#")]),t._v(" useContext")]),t._v(" "),e("ul",[e("li",[t._v("The current context value is determined by the value prop of the nearest "),e("code",[t._v("<MyContext.Provider>")]),t._v(" above the calling component in the tree.")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" value "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("useContext")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyContext"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h4",{attrs:{id:"usereducer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usereducer","aria-hidden":"true"}},[t._v("#")]),t._v(" useReducer")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("state"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dispatch"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("useReducer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reducer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" initialArg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" init"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reducer: (state, action) => newState")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// initialArg: 没有第三个参数 init 时， 这就是 initialState")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// init: (initialArg) => initialState, 可选")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// dispatch: ({type, payload}) => void")]),t._v("\n")])])]),e("h4",{attrs:{id:"usecallback"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usecallback","aria-hidden":"true"}},[t._v("#")]),t._v(" useCallback")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Returns a memoized callback.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" memoizedCallback "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCallback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomething")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("a"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h4",{attrs:{id:"usememo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usememo","aria-hidden":"true"}},[t._v("#")]),t._v(" useMemo")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" memoizedValue "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMemo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("computeExpensiveValue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("a"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h4",{attrs:{id:"useref"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#useref","aria-hidden":"true"}},[t._v("#")]),t._v(" useRef")]),t._v(" "),e("ul",[e("li",[t._v("useRef returns a mutable ref object whose "),e("code",[t._v(".current")]),t._v(" property is initialized to the passed argument (initialValue). The returned object will "),e("strong",[t._v("persist for the full lifetime of the component")]),t._v(".")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ref "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialValue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ref.current")]),t._v("\n")])])]),e("h4",{attrs:{id:"useimperativehandle"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#useimperativehandle","aria-hidden":"true"}},[t._v("#")]),t._v(" useImperativeHandle")]),t._v(" "),e("p",[t._v("和 "),e("code",[t._v("forwardRef")]),t._v(" 一起使用, 见 "),e("a",{attrs:{href:"https://reactjs.org/docs/hooks-reference.html#useimperativehandle",target:"_blank",rel:"noopener noreferrer"}},[t._v("useImperativeHandle"),e("OutboundLink")],1)]),t._v(" "),e("h4",{attrs:{id:"usedebugvalue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usedebugvalue","aria-hidden":"true"}},[t._v("#")]),t._v(" useDebugValue")]),t._v(" "),e("p",[t._v("be used to display a label for custom hooks in React DevTools. see "),e("a",{attrs:{href:"https://reactjs.org/docs/hooks-reference.html#usedebugvalue",target:"_blank",rel:"noopener noreferrer"}},[t._v("useDebugValue"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"参考文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考文档","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考文档")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://wattenberger.com/blog/react-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("Thinking in React Hooks"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/gragland/usehooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/gragland/usehooks"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);